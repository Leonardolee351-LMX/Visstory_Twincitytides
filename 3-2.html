<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ë∑®Â¢ÉÁîüÊ¥ª - Cross-Boundary Living</title>
  
  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif;
      overflow: hidden;
    }

    /* Custom Scrollbar */
    .scrollbar-thin::-webkit-scrollbar {
      height: 8px;
    }

    .scrollbar-thin::-webkit-scrollbar-track {
      background: transparent;
    }

    .scrollbar-thin::-webkit-scrollbar-thumb {
      background: rgba(77, 182, 172, 0.3);
      border-radius: 4px;
    }

    .scrollbar-thin::-webkit-scrollbar-thumb:hover {
      background: rgba(77, 182, 172, 0.5);
    }

    /* Smooth Transitions */
    .fade-enter {
      opacity: 0;
    }

    .fade-enter-active {
      opacity: 1;
      transition: opacity 500ms cubic-bezier(0.4, 0, 0.2, 1);
    }

    .fade-exit {
      opacity: 1;
    }

    .fade-exit-active {
      opacity: 0;
      transition: opacity 500ms cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Timeline Card Hover Effects */
    .timeline-card {
      position: relative;
      transition: transform 300ms ease;
    }

    .timeline-card:hover {
      transform: scale(1.05);
    }

    .timeline-card img {
      transition: transform 500ms ease;
    }

    .timeline-card:hover img {
      transform: scale(1.1);
    }

    .timeline-gradient-default {
      background: linear-gradient(to top, rgba(0,0,0,0.8), rgba(0,0,0,0.4), transparent);
      transition: opacity 300ms ease;
    }

    .timeline-card:hover .timeline-gradient-default {
      opacity: 0;
    }

    .timeline-overlay-teal {
      background: rgba(77, 182, 172, 0.9);
      opacity: 0;
      transition: opacity 300ms ease;
    }

    .timeline-card:hover .timeline-overlay-teal {
      opacity: 1;
    }

    .timeline-card:hover .timeline-description {
      max-height: 12rem;
      opacity: 1;
    }

    /* Persona Card Hover */
    .persona-card {
      transition: transform 300ms ease, opacity 300ms ease;
    }

    .persona-card:hover {
      transform: translateY(-4px);
    }

    /* Hide scrollbar for timeline */
    .scrollbar-hide {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }

    .scrollbar-hide::-webkit-scrollbar {
      display: none;
    }

    /* Loading placeholder for images */
    .image-loading {
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: loading 1.5s ease-in-out infinite;
    }

    @keyframes loading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
  </style>
</head>
<body>

  <style>
    .nav-link { color: #64748b; position: relative; }
    .nav-link.active, .nav-link:hover { color: #0E7490; }
    .nav-link.active::after, .nav-link:hover::after {
      content: '';
      position: absolute;
      bottom: -4px;
      left: 0;
      width: 100%;
      height: 2px;
      background: #0E7490;
      border-radius: 2px;
    }
    #contentSection .content-inner { padding-top: 6rem !important; }
    body { animation: fadeInPage 0.8s ease-out; }
    @keyframes fadeInPage { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
  </style>

  <script>
    // Global language state
    let lang = localStorage.getItem('lang') || 'en';
  </script>
  
  <div id="app" class="min-h-screen w-full overflow-hidden bg-gradient-to-br from-[#F0F9F9] to-white">
    <!-- Navigation - Moved outside scrollable areas -->
    <nav class="fixed top-6 left-1/2 -translate-x-1/2 z-[9999] w-[90%] max-w-2xl">
      <div class="bg-white/70 backdrop-blur-md border border-slate-200/50 shadow-lg rounded-2xl px-6 py-3 flex items-center justify-between">
        <div class="flex items-center gap-2">
          <div class="w-3 h-3 bg-primary rounded-full animate-pulse"></div>
          <span class="text-xs font-bold tracking-widest text-slate-800 uppercase font-mono">NBSB Research</span>
        </div>
        <div class="flex gap-4 md:gap-8">
          <a href="3-1.html" class="nav-link text-sm font-semibold transition-colors hover:text-primary" id="nav-3-1"><span data-zh="Ë∑®Êó∂Á©∫ÂàÜÊûê" data-en="Cross-Temporal Analysis">Ë∑®Êó∂Á©∫ÂàÜÊûê</span></a>
          <a href="3-2.html" class="nav-link text-sm font-semibold transition-colors hover:text-primary" id="nav-3-2"><span data-zh="Áæ§ÂÉèÁ∫™ÂÆû" data-en="Persona">Persona</span></a>
          <a href="3-3.html" class="nav-link text-sm font-semibold transition-colors hover:text-primary" id="nav-timeline"><span data-zh="Ë∑®Â¢ÉÊó∂Èó¥Á∫ø" data-en="Cross-Border Timeline">Ë∑®Â¢ÉÊó∂Èó¥Á∫ø</span></a>
          <a href="4-1future_question.html" class="nav-link text-sm font-semibold transition-colors hover:text-primary" id="nav-future"><span data-zh="Êú™Êù•ËÆÆÈ¢ò" data-en="Future Questions">Êú™Êù•ËÆÆÈ¢ò</span></a>
        </div>
        <button id="lang-toggle" class="text-xs font-semibold px-3 py-1 rounded-lg border border-slate-200 text-slate-600 hover:text-primary">EN</button>
        <button onclick="window.print()" class="hidden md:block text-slate-400 hover:text-slate-600">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9V2h12v7"></path><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></svg>
        </button>
      </div>
    </nav>

    <!-- Left Hero Section - Fixed -->
    <div id="heroSection" class="fixed left-0 top-0 h-screen w-[35vw] hidden lg:block">
      <img id="heroImage" src="" alt="Hero" class="w-full h-full object-cover fade-enter">
    </div>

    <!-- Right Content Section - Scrollable -->
    <div id="contentSection" class="lg:ml-[35vw] ml-0 h-screen overflow-y-auto overflow-x-hidden">
      <div class="content-inner max-w-[1024px] mx-auto px-8 py-12">
        <!-- Navigation was here -->
        
        <!-- Mobile Hero Banner -->
        <div class="lg:hidden mb-8 -mx-8 h-[40vh] relative">
          <img id="mobileHeroImage" src="" alt="Mobile Hero" class="w-full h-full object-cover">
        </div>

        <!-- Persona Selector Cards -->
        <div id="personaCards" class="grid grid-cols-4 gap-4 mb-12">
          <!-- Cards will be generated by JavaScript -->
        </div>

        <!-- Main Content Container -->
        <div id="mainContent">
          <!-- Content will be generated by JavaScript -->
        </div>

      </div>
    </div>
  </div>

  <script>
    // ============================================
    // DATA LAYER
    // ============================================
    const ASSETS = {
      hero: 'https://images.unsplash.com/photo-1519643381401-22c77e60520e?w=800',
      avatar1: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=200',
      avatar2: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=200',
      avatar3: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=200',
      avatar4: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=200',
      timeline1: 'https://images.unsplash.com/photo-1506812574058-fc75fa93fead?w=400',
      timeline2: 'https://images.unsplash.com/photo-1464207687429-7505649dae38?w=400',
      timeline3: 'https://images.unsplash.com/photo-1501594907352-04cda38ebc29?w=400',
      timeline4: 'https://images.unsplash.com/photo-1492144534655-ae79c964c9d7?w=400',
      timeline5: 'https://images.unsplash.com/photo-1531219432768-9f540ce91ef3?w=400',
      timeline6: 'https://images.unsplash.com/photo-1485871981521-5b1fd3805eee?w=400',
      timeline7: 'https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=400',
      timeline8: 'https://images.unsplash.com/photo-1506126613408-eca07ce68773?w=400',
      timeline9: 'https://images.unsplash.com/photo-1519681393784-d120267933ba?w=400'
    };

    const personasData = [
      {
        id: "leilei",
        name: "leilei",
        nameEn: "Lei",
        age: 20,
        role: "Ë∑®Â¢ÉÂ≠¶Á´•",
        roleEn: "Cross-border Student",
        description: "Ê∑±Ê∏ØÈÄöÂ≠¶ÔºåËøΩÊ±ÇÊïôËÇ≤Êú∫‰ºö",
        descriptionEn: "Cross-border student pursuing educational opportunities",
        heroImage: "./images/imgLeiPortrait.png",
        avatarImage: "./images/imgLeiCard.png",
        avatarOverlay: null,
        motivation: "‰ªéÂ∞èÂú®Ê∑±Âú≥ÈïøÂ§ßÁöÑÂ•πÔºåÈÄâÊã©ÊØèÂ§©Ë∑®Â¢ÉÂà∞È¶ôÊ∏Ø‰∏äÂ≠¶ÔºåÊòØ‰∏∫‰∫ÜËé∑ÂæóÊõ¥ÂõΩÈôÖÂåñÁöÑÊïôËÇ≤ËµÑÊ∫ê„ÄÇËôΩÁÑ∂ÈÄöÂã§ËæõËã¶Ôºå‰ΩÜÂ•πËÆ§‰∏∫ËøôÊòØÊäïËµÑÊú™Êù•ÊúÄÂÄºÂæóÁöÑÈÄâÊã©„ÄÇ",
        motivationEn: "Growing up in Shenzhen, she crosses daily to study in Hong Kong for more international resources. It‚Äôs exhausting, but she sees it as the best investment.",
        adaptLiving: [
          { zh: "Êó©Ëµ∑Â∑≤Êàê‰π†ÊÉØÔºå6ÁÇπËµ∑Â∫äÂØπÂ•πÊù•ËØ¥ÊòØÊó•Â∏∏", en: "Waking at 6 a.m. is routine." },
          { zh: "Âú®ÈÄöÂã§Ë∑Ø‰∏äÂÆåÊàê‰Ωú‰∏öÈ¢Ñ‰π†ÔºåÂÖÖÂàÜÂà©Áî®ÊØèÂàÜÈíü", en: "She previews homework during the commute to use every minute." },
          { zh: "Âë®Êú´‰ºöÂíåÂêåÊ†∑Ë∑®Â¢ÉÁöÑÊúãÂèã‰∏ÄËµ∑Ê¥ªÂä®Ôºå‰∫íÁõ∏ÊîØÊåÅ", en: "Weekends with fellow cross-border friends offer mutual support." }
        ],
        challenges: [
          { zh: "ÊØèÂ§©ÂæÄËøîÈúÄË¶Å3Â∞èÊó∂Ôºå‰∏•ÈáçÂéãÁº©‰∫ÜËØæÂ§ñÊ¥ªÂä®Êó∂Èó¥", en: "Three hours daily cut deeply into extracurricular time." },
          { zh: "ÁªèÂ∏∏Âõ†Âè£Â≤∏Êã•Â†µËÄåËøüÂà∞ÔºåÂΩ±ÂìçÂá∫Âã§ËÆ∞ÂΩï", en: "Border congestion often causes tardiness and attendance issues." },
          { zh: "Èöæ‰ª•ÂèÇ‰∏éÊîæÂ≠¶ÂêéÁöÑÁ§æÂõ¢Ê¥ªÂä®ÂíåÂêåÂ≠¶ËÅö‰ºö", en: "Hard to join after-school clubs or gatherings." }
        ],
        thoughts: [
          { zh: "ÊàëÁæ°ÊÖï‰ΩèÂú®È¶ôÊ∏ØÁöÑÂêåÂ≠¶Ôºå‰ªñ‰ª¨ÊîæÂ≠¶ÂêéÂèØ‰ª•Ëá™Áî±Ê¥ªÂä®", en: "I envy classmates living in Hong Kong‚Äîthey can hang out freely after class." },
          { zh: "ËôΩÁÑ∂ÂæàÁ¥ØÔºå‰ΩÜÊÉ≥Âà∞ËÉΩÊé•ÂèóÊõ¥Â•ΩÁöÑÊïôËÇ≤Â∞±ËßâÂæóÂÄºÂæó", en: "It‚Äôs tiring, but better education makes it worth it." },
          { zh: "Â∏åÊúõÊú™Êù•Âè£Â≤∏ÈÄöÂÖ≥ËÉΩÊõ¥Âø´‰∏Ä‰∫õ", en: "Hope faster border clearance in the future." }
        ],
        timeline: [
          { time: "6:00", title: "Wake Up", titleEn: "Wake Up", description: "ÈóπÈíüÂìçËµ∑ÔºåÊñ∞ÁöÑ‰∏ÄÂ§©ÂºÄÂßã‰∫Ü", descriptionEn: "Alarm rings, a new day begins.", image: "./images/imgLeiTL (1).png" },
          { time: "6:45", title: "Leave Home", titleEn: "Leave Home", description: "Ê£ÄÊü•ËØÅ‰ª∂ÔºåÂá∫Èó®ÂâçÂæÄÂè£Â≤∏", descriptionEn: "Check ID, leave for the border.", image: "./images/imgLeiTL (2).png" },
          { time: "7:30", title: "Border Crossing", titleEn: "Border Crossing", description: "ÊéíÈòüËøáÂÖ≥Ôºå‰∫∫ÊΩÆÊã•Êå§", descriptionEn: "Queue for crossing, crowded.", image: "./images/imgLeiTL (3).png" },
          { time: "8:30", title: "Arrive School", titleEn: "Arrive School", description: "Áªà‰∫éÂà∞ËææÂ≠¶Ê†°ÔºåÂáÜÂ§á‰∏äËØæ", descriptionEn: "Arrived at school, ready for class.", image: "./images/imgLeiTL (4).png" },
          { time: "16:00", title: "After School", titleEn: "After School", description: "ÊîæÂ≠¶‰∫ÜÔºåÂºÄÂßãËøîÁ®ã‰πãË∑Ø", descriptionEn: "School's out, start the journey back.", image: "./images/imgLeiTL (5).png" },
          { time: "17:30", title: "On the Way Back", titleEn: "On the Way Back", description: "Âú®Âú∞ÈìÅ‰∏äÂÆåÊàê‰Ωú‰∏ö", descriptionEn: "Finish homework on the subway.", image: "./images/imgLeiTL (6).png" },
          { time: "18:30", title: "Return Home", titleEn: "Return Home", description: "Áªà‰∫éÂõûÂà∞ÂÆ∂ÔºåÂèØ‰ª•‰ºëÊÅØ‰∫Ü", descriptionEn: "Finally home, time to rest.", image: "./images/imgLeiTL (7).png" }
        ]
      },
      {
        id: "mrhu",
        name: "ËÉ°ÂÖàÁîü",
        nameEn: "Mr. Hu",
        age: 35,
        role: "Ë∑®Â¢ÉÂ∑•‰Ωú",
        roleEn: "Cross-border Worker",
        description: "Ê∏ØÊ∑±ÂèåÂüéÁîüÊ¥ªÔºåËÅåÂú∫Á≤æËã±",
        descriptionEn: "HK-SZ dual city life, corporate elite",
        heroImage: "./images/imgHuPortrait.png",
        avatarImage: "./images/imgHuCard.png",
        avatarOverlay: null,
        motivation: "Âú®È¶ôÊ∏ØÈáëËûçË°å‰∏öÂ∑•‰ΩúÔºå‰ΩÜÈÄâÊã©‰ΩèÂú®Ê∑±Âú≥‰ª•ËäÇÁúÅÁîüÊ¥ªÊàêÊú¨„ÄÇÊ∑±Âú≥ÁöÑÊàø‰ª∑Áõ∏ÂØπÂêàÁêÜÔºåÁîüÊ¥ªÂìÅË¥®‰πü‰∏çÈîôÔºåËÄåÈ¶ôÊ∏ØÁöÑÈ´òËñ™ËÉΩÊîØÊíëÊõ¥Â•ΩÁöÑÁîüÊ¥ªË¥®Èáè„ÄÇ",
        motivationEn: "He works in HK finance but lives in Shenzhen to save costs‚Äîmore space and good quality life, supported by HK salary.",
        adaptLiving: [
          { zh: "ÂäûÁêÜ‰∫ÜÂ§öÊ¨°ÂæÄËøîÁ≠æÊ≥®ÔºåÈÄöÂÖ≥Â∑≤ÁªèÈùûÂ∏∏ÁÜüÁªÉ", en: "Multiple-entry visas; clearance is smooth." },
          { zh: "Âú®Ê∑±Âú≥‰∫´ÂèóÊõ¥ÂÆΩÊïûÁöÑÂ±Ö‰ΩèÁ©∫Èó¥ÂíåÊõ¥‰ΩéÁöÑÁîüÊ¥ªÊàêÊú¨", en: "Enjoys larger space and lower costs in Shenzhen." },
          { zh: "Âë®Êú´‰ºöÂú®Ê∑±Âú≥ÂíåÊúãÂèãËÅö‰ºöÔºå‰∫´ÂèóÂÜÖÂú∞ÁöÑ‰æøÂà©ÁîüÊ¥ª", en: "Weekends in Shenzhen with friends, enjoying convenience." }
        ],
        challenges: [
          { zh: "ÊØèÂ§©ÈÄöÂã§Ê∂àËÄóÂ§ßÈáèÊó∂Èó¥ÂíåÁ≤æÂäõ", en: "Commuting consumes much time and energy." },
          { zh: "Â∑•‰ΩúÂä†Áè≠Êó∂Êó†Ê≥ïÂèäÊó∂ÂõûÂÆ∂ÔºåÈúÄË¶Å‰∏¥Êó∂‰ΩèÂÆø", en: "Overtime sometimes forces temporary stays." },
          { zh: "‰∏§Âú∞ÂåªÁñóÂíåÁ§æ‰øùÂà∂Â∫¶‰∏çÂêåÔºåÂ∞±Âåª‰∏ç‰æø", en: "Different systems make medical visits inconvenient." }
        ],
        thoughts: [
          { zh: "Ë∑®Â¢ÉÂ∑•‰ΩúËÆ©ÊàëÊó¢ËÉΩËµöÈ¶ôÊ∏ØÁöÑËñ™Ê∞¥ÔºåÂèàËÉΩ‰∫´ÂèóÊ∑±Âú≥ÁöÑÁîüÊ¥ª", en: "Cross-border work earns HK pay with SZ lifestyle." },
          { zh: "Â∏åÊúõÊú™Êù•‰∏§Âú∞ËûçÂêàËÉΩÊõ¥Ê∑±ÂÖ•ÔºåÂáèÂ∞ëÈÄöÂÖ≥ÈöúÁ¢ç", en: "Hopes deeper integration and fewer barriers." },
          { zh: "ËøôÁßçÁîüÊ¥ªÊñπÂºèÈúÄË¶ÅÂæàÂº∫ÁöÑÊó∂Èó¥ÁÆ°ÁêÜËÉΩÂäõ", en: "This lifestyle demands strong time management." }
        ],
        timeline: [
          { time: "7:00", title: "Morning Routine", titleEn: "Morning Routine", description: "ÂáÜÂ§áÂá∫Èó®‰∏äÁè≠", descriptionEn: "Getting ready for work.", image: "./images/imgHuTL (1).png" },
          { time: "8:00", title: "Commute", titleEn: "Commute", description: "ÂâçÂæÄÂè£Â≤∏", descriptionEn: "Heading to the border.", image: "./images/imgHuTL (2).png" },
          { time: "9:00", title: "At Office", titleEn: "At Office", description: "ÂºÄÂßã‰∏ÄÂ§©ÁöÑÂ∑•‰Ωú", descriptionEn: "Start the workday.", image: "./images/imgHuTL (3).png" },
          { time: "12:30", title: "Lunch Break", titleEn: "Lunch Break", description: "ÂçàÈ§êÊó∂Èó¥", descriptionEn: "Lunch break.", image: "./images/imgHuTL (4).png" },
          { time: "18:00", title: "Evening Work", titleEn: "Evening Work", description: "Â§ÑÁêÜÊî∂Â∞æÂ∑•‰Ωú", descriptionEn: "Wrapping up work.", image: "./images/imgHuTL (5).png" },
          { time: "19:30", title: "Head Home", titleEn: "Head Home", description: "‰∏ãÁè≠ËøîÁ®ã", descriptionEn: "Heading back home.", image: "./images/imgHuTL (6).png" },
          { time: "21:00", title: "Home Sweet Home", titleEn: "Home Sweet Home", description: "Âà∞ÂÆ∂‰ºëÊÅØ", descriptionEn: "Home and resting.", image: "./images/imgHuTL (7).png" }
        ]
      },
      {
        id: "zhang",
        name: "Zhang",
        nameEn: "Zhang",
        age: 23,
        role: "È¶ôÊ∏ØÁ°ïÂ£´",
        roleEn: "Hong Kong Postgraduate",
        description: "Ëµ¥Ê∏ØÊ∑±ÈÄ†ÔºåÁà±Â•ΩÈÄõË°ó‰∏éÊºîÂî±‰ºö",
        descriptionEn: "Pursuing master's in HK, loves shopping and concerts",
        heroImage: "./images/imgZhangPortrait.png",
        avatarImage: "./images/imgZhangCard.png",
        avatarOverlay: null,
        motivation: "Â∑•‰Ωú‰∏ÄÂπ¥ÂêéÊù•Âà∞È¶ôÊ∏ØÊ∑±ÈÄ†„ÄÇÈÄâÊã©Êù•Âà∞È¶ôÊ∏Ø‰∏ç‰ªÖÊòØÂ∏åÊúõËΩ¨Ë°åMarketingÁõ∏ÂÖ≥Ë°å‰∏öÔºåÂêåÊó∂È¶ôÊ∏ØÁöÑËÅåÂú∫‰∏éÊó•Â∏∏ÁîüÊ¥ªÂØπ‰∫éÂ•≥ÊÄßÊõ¥Âä†ÂèãÂ•Ω„ÄÇ",
        motivationEn: "After a year of work she pursues a master‚Äôs in Hong Kong, aiming to shift to marketing; HK‚Äôs workplace and daily life are friendlier to women.",
        adaptLiving: [
          { zh: "ÈÄâËØæËá™Áî±ÔºåËá™Áî±Êó∂Èó¥Â§ö„ÄÇ‰∏∫‰∫ÜËÉΩÂáèÂ∞ëÈÄöÂã§ÂºÄÊîØÔºåÂ•π‰ºöÊääËØæÁ®ãÈõÜ‰∏≠Âà∞‰∏âÂ§©Êù•‰∏äËØæÔºåÂâ©‰∏ãÁöÑÊó∂Èó¥Â∞±ÂèØ‰ª•ÂÆû‰π†ÊàñÊ∏∏‰πê„ÄÇ", en: "Flexible course selection; she clusters classes into three days to cut commute costs, leaving time for internships or leisure." },
          { zh: "Âõ†‰∏∫ËØæÁ®ãÂØÜÈõÜÔºå‰∏≠Âçà‰∏çËøΩÊ±ÇÁ≤æËá¥ÂçàÈ§êÔºå‰ºòÂÖàËß£ÂÜ≥\"ËÉΩÁù°‰∏Ä‰ºöÂÑø\"ÁöÑÂú∞ÁÇπÔºàÂõæ‰π¶È¶ÜËßíËêΩ/Â≠¶Áîü‰∏≠ÂøÉÊ≤ôÂèë/Á©∫ÊïôÂÆ§Ôºâ", en: "With dense classes, she prioritizes quick naps over fancy lunches‚Äîlibrary corners, student center sofas, empty classrooms." }
        ],
        challenges: [
          { zh: "Êó©ËØæ=ÂøÖÈ°ªÂáÜÁÇπÔºå‰ªª‰ΩïÂè£Â≤∏Êã•Â†µ/‰∫§ÈÄöÂª∂ËØØÈÉΩ‰ºöËÆ©Â•πÊï¥Â§©ËäÇÂ•èÂ¥©Áõò„ÄÇ", en: "Morning class requires punctuality; any border or transit delay ruins the day." },
          { zh: "ÈïøÊúüÊó©Ëµ∑+Ë∑®Â¢ÉÊäòËøîÔºåÂçàÁù°ÂèòÊàêÂàöÈúÄÔºõ‰∏ÄÁ¥ØÂ∞±ÂæàÈöæ‰øùÊåÅËØæÂ†Ç‰∏ìÊ≥®‰∏é‰∫ßÂá∫„ÄÇ", en: "Early rising and crossing back and forth make naps essential; fatigue hurts focus and output." },
          { zh: "Áî±‰∫é‰πüÊúâ‰∏çÂ∞ë‰∫∫‰∏éÂ•π‰∏ÄÊ†∑Ê∏ØËØªÊ∑±Â±ÖÔºåÂõ†Ê≠§Á§æ‰∫§‰∏ä‰∏ç‰ºöÊúâËøáÂ§öÈöúÁ¢ç„ÄÇ‰ΩÜÂ•π‰∏éÈ¶ôÊ∏ØÁöÑÁîüÊ¥ªÊñáÂåñ‰æùÊóßÂ≠òÂú®‰∏ÄÂ±ÇËñÑËÜú„ÄÇ", en: "Many also study in HK but live in SZ, so social life is fine; yet a thin film separates her from HK‚Äôs culture." }
        ],
        thoughts: [
          { zh: "Êàë‰∏çÊòØ‰∏çÊÉ≥ÂèÇ‰∏éÂêåÂ≠¶ÁöÑafter classÔºåÊàëÊòØÁúüÁöÑÂõû‰∏çÂéªÈÇ£‰πàÊôö„ÄÇËÄå‰∏îÊ∑±Âú≥ÁöÑÈ•≠ËèúÂíåshoppingÁéØÂ¢É‰∏çÈ¶ôÂêóÂìàÂìà", en: "It‚Äôs not that I don‚Äôt want to join after class‚ÄîI just can‚Äôt get back that late. And isn‚Äôt Shenzhen‚Äôs food and shopping great?" },
          { zh: "ÊàëÊúÄÁæ°ÊÖï‰ΩèÊ∏ØÂ≤õÁöÑÂêåÂ≠¶Ôºö‰ªñ‰ª¨‰∏ãËØæÂõûÂÆ∂Â∞±ËÉΩÂéªÊµ∑Ëæπcity-walkÔºåËÄåÊàëÂè™ÊúâËØ¥‰∏ãÂçàÊ≤°ËØæÁöÑÊó∂ÂÄôÊâçËÉΩÂÅ∂Â∞îÂú®È¶ôÊ∏ØË°óËæπÁßçËçâÊï£Ê≠•Áé©ËÄç", en: "I envy classmates on HK Island who can go seaside city-walking after class; I can only stroll in HK when I‚Äôm free in the afternoon." },
          { zh: "Âπ∏Â•ΩÂú®È¶ôÊ∏ØËøòÊúâÊàëÁöÑÂßêÂ¶πÂ±Ö‰ΩèÔºå‰∏çÁÑ∂Êôö‰∏äÂê¨ÂÆåÊºîÂî±‰ºöÂæàÊôö‰∫ÜÂ∞±Ê≤°Âú∞Êñπ‰Ωè‰∫Ü„ÄÇÊôö‰∏äÁöÑËæπÂ¢ÉÂè£Â≤∏Âπ∂‰∏çÊòØÊâÄÊúâÈÉΩ‰ºöÂºÄÊîæÔºåÂáåÊô®ÁöÑÊ∑±Ê∏ØÈÄöÂã§ÈöæÂ∫¶ËøòÊòØÂæàÂ§ßÂæàÂ§ßÁöÑ„ÄÇ", en: "Luckily my girlfriends live in HK; otherwise after late concerts I‚Äôd have nowhere to stay. Not all borders stay open at night; midnight SZ‚ÄìHK commuting is truly hard." }
        ],
        timeline: [
          { time: "6:55", title: "Departure", titleEn: "Departure", description: "Â•πÂú®ÈóπÈíüÂ£∞Ê®°Á≥äÈÜíÊù•ÔºåÂú®ÂÆ∂ÈáåÊÄùÁ¥¢ÈúÄË¶ÅÂ∏¶‰ªÄ‰πà‰∏úË•øÂá∫ÂèëÂéªÂ≠¶Ê†°„ÄÇËØÅ‰ª∂ÔºåÊó©È§êÂá∫Èó®ÂâçÊ£ÄÊü•‰∏ÄÈÅç„ÄÇ", descriptionEn: "Waking up to the alarm, thinking about what to bring. ID, breakfast‚Äîcheck before leaving.", image: "./images/imgZhangTL (1).png" },
          { time: "7:30", title: "On the way", titleEn: "On the way", description: "Ê∑±Âú≥ÁöÑÊ∏ÖÊô®ÂæàÂÆâÈùôÔºåÂ•πÂú®Âú∞ÈìÅ‰∏ä‰∏äÈªòÈªòÂêÉÊó©È§ê„ÄÇÈ¶ôÊ∏ØÁöÑÂÖ¨‰∫§‰∏ä‰∏çËÉΩËøõÈ£ü‰ªª‰ΩïÈ£üÁâ©", descriptionEn: "Shenzhen's morning is quiet; she eats breakfast silently on the metro. No eating allowed on HK buses.", image: "./images/imgZhangTL (2).png" },
          { time: "7:55", title: "Arrived at Border", titleEn: "Arrived at Border", description: "‰∫∫ÊµÅÂèòÊàê‰∏ÄÊù°Á∫øÔºåÂ•πÂºÄÂßãËøõÂÖ•\"Ëá™Âä®Ê®°Âºè\"ÔºöÂà∑ËØÅ„ÄÅËµ∞Ë∑Ø„ÄÅË∑üÈòü„ÄÇÊúâ‰∫õÊó∂ÂÄôÂ•π‰ºöÂøòËÆ∞Â∏¶ËØÅ‰ª∂ÔºåËøôÂØπ‰ªñËÄåË®ÄÂ∞±ÊòØÊØÅÁÅ≠ÊâìÂáª„ÄÇ", descriptionEn: "The crowd becomes a line; she enters 'auto mode': swipe ID, walk, follow. Sometimes she forgets her ID‚Äîa devastating blow.", image: "./images/imgZhangTL (3).png" },
          { time: "8:10", title: "Metro Transfer", titleEn: "Metro Transfer", description: "Êó©È´òÂ≥∞ÁöÑÂú∞ÈìÅ‰∫∫ÊÄªÊòØÂæàÂ§ö„ÄÇ‰ΩÜÊòØ‰∏äÁè≠ÂâçÈúÄË¶ÅÊ≥®ÊÑèÂΩ¢Ë±°„ÄÇË∑®Â¢ÉÂêéÁöÑÈ¶ôÊ∏ØÂú∞ÈìÅÈÄöÂã§ÊòØÊúÄÊº´ÈïøÁöÑÁ≠âÂæÖÊó∂Èó¥„ÄÇ‰ªäÂ§©Â•π‰π∞‰∫Ü‰ºòÂÖàÂ∫ßÔºå1ÊÉ≥ÂùêÁùÄÊÖ¢ÊÖ¢ÊÅ¢Â§çÁªèÂéÜ", descriptionEn: "Rush hour metro is crowded. Need to look good before work. The HK leg is the longest wait. Bought a priority seat today to recover energy.", image: "./images/imgZhangTL (4).png" },
          { time: "9:15", title: "Arrive the company", titleEn: "Arrive the company", description: "ËøõÂà∞Â≠¶Ê†°Ê†°Èó®ÁöÑÈÇ£‰∏ÄÂàªÔºåÂ•πÊÑèËØÜÂà∞Âø´Ë¶Å‰∏äËØæ‰∫ÜÔºåÂ•πÂä†Âø´‰∫ÜËÑöÊ≠•ÂâçÂæÄÊïôÂÆ§", descriptionEn: "Entering the school gate, realizing class is starting soon, she speeds up to the classroom.", image: "./images/imgZhangTL (5).png" },
          { time: "12:00", title: "Group Work", titleEn: "Group Work", description: "‰∏∫‰∫ÜÂáèÂ∞ëÈÄöÂã§ÂºÄÊîØÂêàÁêÜÊîØÈÖçÊó∂Èó¥ÔºåÂ•πÈÄâ‰∫Ü‰∏âÂ†ÇËØæÂú®‰∏ÄÂ§©Âêå‰∫ã‰∏äÂÆåÔºåËøô‰πüÊÑèÂë≥ÁùÄ‰ªäÂ§©Â•πÁöÑÂ∞èÁªÑËÆ®ËÆ∫ÂíåËØæÁ®ãÂæàÁπÅÂøô„ÄÇÂ•πË¶ÅÂùöÊåÅ‰∏çÁù°ÂçàËßâ„ÄÇ", descriptionEn: "To save commute costs, she packs three classes into one day, meaning busy group discussions. She must resist napping.", image: "./images/imgZhangTL (6).png" },
          { time: "19:25", title: "CityWalk Wander", titleEn: "CityWalk Wander", description: "‰∏ãËØæÂêéÂ•πÂπ∂‰∏çÁùÄÊÄ•ÂõûÂÆ∂„ÄÇÂ•πÊÉ≥Âú®È¶ôÊ∏ØÂÜçÊ∫úËææÁäπË±´‰∏Ä‰ºöÔºåÂëºÂê∏‰∏Ä‰∏ãÊñ∞È≤úÁ©∫Ê∞î„ÄÇ‰∫éÊòØÁî®ÁùÄ‰∏∫Êï∞‰∏çÂ§öÁöÑÊó∂Èó¥citywalk‰∫Ü‰∏Ä‰ºö.ÊúâÊó∂‰ºöÂÖ¥Â•ãÂøòËÆ∞ÂõûÂÆ∂„ÄÇ", descriptionEn: "After class, she lingers in HK for fresh air, city-walking with her limited time. Sometimes she gets too excited and forgets to go home.", image: "./images/imgZhangTL (7).png" },
          { time: "20:30", title: "Cross the Border", titleEn: "Cross the Border", description: "‰æùÊóßÊòØÊéíÈòüÔºåÂà∑Âç°ÔºåÁ≠âÂæÖËøáÂ¢É„ÄÇÊâãÊú∫‰ø°Âè∑ÂæÄÂæÄÂú®ËøôÈáåÈúÄË¶ÅÂàáÊç¢„ÄÇÂπ∏Â•ΩÊôö‰∏äËøáÂÖ≥ÈÄüÂ∫¶Âø´ÔºåÊØïÁ´ü‰∫∫Ê≤°ÊúâÈÇ£‰πàÂ§ö‰∫Ü„ÄÇ", descriptionEn: "Queue, swipe, wait again. Phone signal switches here. Luckily, night crossing is faster with fewer people.", image: "./images/imgZhangTL (8).png" },
          { time: "21:00", title: "Go back home", titleEn: "Go back home", description: "ÂõûÂà∞ÂÆ∂‰∏ÄËæπÂêÉÂ§ñÂçñ‰∏ÄËæπÂÜô‰Ωú‰∏ö", descriptionEn: "Back home, eating takeout while doing homework.", image: "./images/imgZhangTL (9).png" }
        ]
      },
      {
        id: "polin",
        name: "Polin",
        nameEn: "Polin",
        age: 28,
        role: "Âåó‰∏äÊ∂àË¥π",
        roleEn: "Northbound Consumer",
        description: "È¶ôÊ∏ØÂ±ÖÊ∞ëÔºåÊ∑±Âú≥Ë¥≠Áâ©Ëææ‰∫∫",
        descriptionEn: "Hong Kong resident, Shenzhen shopping expert",
        heroImage: "./images/imgPolinPortrait.png",
        avatarImage: "./images/imgPolinCard.png",
        avatarOverlay: null,
        motivation: "‰Ωú‰∏∫ÂúüÁîüÂúüÈïøÁöÑÈ¶ôÊ∏Ø‰∫∫ÔºåÂ•πÂèëÁé∞Ê∑±Âú≥ÁöÑÊ∂àË¥πÁéØÂ¢ÉÊõ¥‰∏∞ÂØåÂ§öÊ†∑‰∏î‰ª∑Ê†ºÂÆûÊÉ†„ÄÇ‰ªéÁæéÈ£üÂà∞Ë¥≠Áâ©Ôºå‰ªéÁæéÂÆπÂà∞Â®±‰πêÔºåÊ∑±Âú≥ÈÉΩÊèê‰æõ‰∫ÜÊõ¥Â§öÈÄâÊã©ÂíåÊÄß‰ª∑ÊØî„ÄÇ",
        motivationEn: "Born and raised in HK, she finds Shenzhen‚Äôs consumption richer and more affordable‚Äîfrom food and shopping to beauty and entertainment.",
        adaptLiving: [
          { zh: "Âë®Êú´ÂøÖÂÆöÂåó‰∏äÔºåÂ∑≤ÁªèÂäûÁêÜ‰∫ÜÊ∑±Âú≥ÈÄöÁ≠â‰æøÂà©Âç°", en: "Northbound every weekend; holds Shenzhen travel cards." },
          { zh: "ÁÜüÊÇâÊ∑±Âú≥ÂêÑÂ§ßÂïÜÂúàÔºå‰ªéÁΩóÊπñÂà∞Á¶èÁî∞Ôºå‰ªéÂçóÂ±±Âà∞ÂâçÊµ∑", en: "Familiar with major SZ malls‚Äîfrom Luohu and Futian to Nanshan and Qianhai." },
          { zh: "ÂíåÊúãÂèãÁªÑÂõ¢Ê∂àË¥πÔºåÂàÜ‰∫´ÊäòÊâ£Âíå‰ºòÊÉ†‰ø°ÊÅØ", en: "Shops with friends, sharing deals and discounts." }
        ],
        challenges: [
          { zh: "ÈúÄË¶ÅÂêàÁêÜÂÆâÊéíÊó∂Èó¥ÔºåÈÅøÂÖçÂú®Âè£Â≤∏Êµ™Ë¥πÂ§™Â§öÈÄöÂÖ≥Êó∂Èó¥", en: "Needs smart planning to avoid long border times." },
          { zh: "Êê∫Â∏¶Â§ßÈáèË¥≠Áâ©ÂìÅËøáÂÖ≥Êó∂ÈúÄË¶ÅÊ≥®ÊÑèÊµ∑ÂÖ≥ËßÑÂÆö", en: "Customs rules matter when carrying many goods." },
          { zh: "ÊúâÊó∂‰ºöÂõ†‰∏∫Ê∂àË¥πÂ§™Â∞ΩÂÖ¥ËÄåÈîôËøáÊúÄÂêéÁöÑËøáÂÖ≥Êó∂Èó¥", en: "Sometimes misses the last border closing after too much fun." }
        ],
        thoughts: [
          { zh: "Ê∑±Âú≥ÁöÑÊ∂àË¥πÁúüÁöÑÂ§™È¶ô‰∫ÜÔºÅÂêåÊ†∑ÁöÑ‰ª∑Ê†ºËÉΩ‰π∞Âà∞Êõ¥Â§ö‰∏úË•ø", en: "Shenzhen‚Äôs consumption is amazing‚Äîmore for the same price." },
          { zh: "ÊØèÊ¨°Âåó‰∏äÈÉΩÂÉèÊòØÊé¢Èô©ÔºåÊÄªËÉΩÂèëÁé∞Êñ∞ÁöÑÂ•ΩÂ∫óÂíåÁæéÈ£ü", en: "Every northbound trip is an adventure with new shops and foods." },
          { zh: "Â∏åÊúõÈÄöÂÖ≥ËÉΩÊõ¥‰æøÂà©ÔºåËøôÊ†∑Â∞±ËÉΩÊõ¥È¢ëÁπÅÂú∞Êù•Ê∑±Âú≥‰∫Ü", en: "Hopes easier clearance for more frequent SZ trips." }
        ],
        timeline: [
          { time: "10:00", title: "Start Journey", titleEn: "Start Journey", description: "Âë®Êú´Êó©Êô®ÔºåÂáÜÂ§áÂåó‰∏äÊ∂àË¥π", descriptionEn: "Weekend morning, ready to go north for shopping.", image: ASSETS.timeline1 },
          { time: "11:00", title: "Arrive Shenzhen", titleEn: "Arrive Shenzhen", description: "È°∫Âà©ËøáÂÖ≥ÔºåÂºÄÂßãË¥≠Áâ©‰πãÊóÖ", descriptionEn: "Smooth crossing, start the shopping spree.", image: ASSETS.timeline2 },
          { time: "12:30", title: "Lunch Time", titleEn: "Lunch Time", description: "ÂìÅÂ∞ùÊ∑±Âú≥ÁæéÈ£ü", descriptionEn: "Tasting Shenzhen cuisine.", image: ASSETS.timeline3 },
          { time: "14:00", title: "Shopping", titleEn: "Shopping", description: "ÂïÜÂú∫Êâ´Ë¥ßÔºå‰π∞‰π∞‰π∞", descriptionEn: "Mall shopping, buy buy buy.", image: ASSETS.timeline4 },
          { time: "16:30", title: "Beauty Treatment", titleEn: "Beauty Treatment", description: "‰∫´ÂèóÁæéÂÆπÊúçÂä°", descriptionEn: "Enjoying beauty treatment.", image: ASSETS.timeline5 },
          { time: "18:00", title: "Dinner", titleEn: "Dinner", description: "ÊôöÈ§êËÅö‰ºö", descriptionEn: "Dinner gathering.", image: ASSETS.timeline6 },
          { time: "20:00", title: "Return Home", titleEn: "Return Home", description: "Êª°ËΩΩËÄåÂΩíÔºåÂáÜÂ§áÂõûÈ¶ôÊ∏Ø", descriptionEn: "Returning to HK with a full load.", image: ASSETS.timeline7 }
        ]
      }
    ];

    // ============================================
    // STATE MANAGEMENT
    // ============================================
    let currentPersona = personasData[2]; // Zhang as default
    let scrollY = 0;
    let activeTimelineIndex = 0;

    // ============================================
    // DOM ELEMENTS
    // ============================================
    const heroImage = document.getElementById('heroImage');
    const mobileHeroImage = document.getElementById('mobileHeroImage');
    const contentSection = document.getElementById('contentSection');
    const personaCards = document.getElementById('personaCards');
    const mainContent = document.getElementById('mainContent');

    // ============================================
    // RENDER FUNCTIONS
    // ============================================
    
    function renderPersonaCards() {
      personaCards.innerHTML = personasData.map(persona => `
        <button
          data-persona-id="${persona.id}"
          class="persona-card relative rounded-[20px] p-4 flex flex-col items-center gap-3 transition-all duration-300 backdrop-blur-[10px] ${
            currentPersona.id === persona.id
              ? 'bg-white/80 ring-2 ring-[#4DB6AC] shadow-[0_8px_32px_rgba(77,182,172,0.3)]'
              : 'bg-white/60 opacity-60 hover:opacity-80 shadow-[0_4px_16px_rgba(184,214,214,0.2)]'
          }"
        >
          <div class="relative w-16 h-16 rounded-full overflow-hidden shrink-0">
            <img src="${persona.avatarImage}" alt="${lang==='en' ? (persona.nameEn || persona.name) : persona.name}" class="w-full h-full object-cover" />
          </div>
          <div class="text-center">
            <p class="font-bold text-[#2C3E50] text-sm">${lang==='en' ? (persona.nameEn || persona.name) : persona.name}</p>
            <p class="text-xs text-[#546E7A]">${lang==='en' ? (persona.roleEn || persona.role) : persona.role}</p>
          </div>
        </button>
      `).join('');

      // Add click handlers
      document.querySelectorAll('[data-persona-id]').forEach(card => {
        card.addEventListener('click', () => {
          const personaId = card.getAttribute('data-persona-id');
          const persona = personasData.find(p => p.id === personaId);
          if (persona) {
            changePersona(persona);
          }
        });
      });
    }

    function renderMainContent(persona) {
      if (!persona) return;
      
      const isEn = lang === 'en';
      
      mainContent.innerHTML = `
        <div class="fade-enter-active">
          <!-- Persona Header -->
          <div class="mb-8">
            <div class="flex items-baseline gap-4 mb-2">
              <h1 class="text-5xl font-extrabold text-[#4DB6AC]">${isEn ? (persona.nameEn || persona.name) : persona.name}</h1>
              <span class="text-xl text-[#2C3E50] font-semibold">Age: ${persona.age}</span>
            </div>
            <div class="flex items-center gap-3">
              <span class="px-3 py-1 bg-[#4DB6AC] text-white text-sm rounded-full">
                ${isEn ? (persona.roleEn || persona.role) : persona.role}
              </span>
              <p class="text-[#546E7A] text-sm">${isEn ? (persona.descriptionEn || persona.description) : persona.description}</p>
            </div>
          </div>

          <!-- Main Info Grid -->
          <div class="grid lg:grid-cols-[2fr_1fr] gap-8 mb-12">
            <!-- Left: Motivation & Adapt -->
            <div class="rounded-[20px] bg-white/80 backdrop-blur-[12px] p-8 shadow-[0_8px_32px_rgba(184,214,214,0.3)]">
              <div class="mb-6">
                <h3 class="text-xl font-bold text-[#2C3E50] mb-3">Motivation</h3>
                <p class="text-[#546E7A] leading-relaxed">${isEn ? (persona.motivationEn || persona.motivation) : persona.motivation}</p>
              </div>

              <div class="h-px bg-gradient-to-r from-[#4DB6AC] to-transparent mb-6"></div>

              <div>
                <h3 class="text-xl font-bold text-[#2C3E50] mb-3">Adapt to Living</h3>
                <div class="space-y-3">
                  ${persona.adaptLiving.map(item => `
                    <div class="flex gap-3">
                      <div class="w-2 h-2 rounded-full bg-[#4DB6AC] mt-2 shrink-0"></div>
                      <p class="text-[#546E7A] leading-relaxed">${isEn ? item.en : item.zh}</p>
                    </div>
                  `).join('')}
                </div>
              </div>

              <div class="h-px bg-gradient-to-r from-[#4DB6AC] to-transparent my-6"></div>

              <div>
                <h3 class="text-xl font-bold text-[#2C3E50] mb-3">Facing Challenges</h3>
                <div class="space-y-4">
                  ${persona.challenges.map(challenge => `
                    <div class="p-4 bg-white/60 backdrop-blur-[8px] rounded-[16px] border border-[#4DB6AC]/20 shadow-[0_4px_16px_rgba(77,182,172,0.1)]">
                      <p class="text-[#546E7A] text-sm leading-relaxed">${isEn ? challenge.en : challenge.zh}</p>
                    </div>
                  `).join('')}
                </div>
              </div>
            </div>

            <!-- Right: Thoughts with Parallax -->
            <div class="space-y-4">
              <h3 class="text-xl font-bold text-[#2C3E50] mb-4 flex items-center gap-2">
                <span class="w-8 h-8 rounded-full bg-[#4DB6AC]/20 flex items-center justify-center">
                  üí≠
                </span>
                Thoughts
              </h3>
              ${persona.thoughts.map((thought, idx) => `
                <div 
                  class="thought-bubble p-5 bg-white/70 backdrop-blur-[12px] rounded-[20px] shadow-[0_8px_24px_rgba(184,214,214,0.25)] border border-[#4DB6AC]/10"
                  data-parallax-speed="${0.05 + idx * 0.03}"
                >
                  <p class="text-[#546E7A] text-sm leading-relaxed italic">"${isEn ? thought.en : thought.zh}"</p>
                </div>
              `).join('')}
            </div>
          </div>

          <!-- Daily Timeline Section -->
          <div class="mb-8">
            <h2 class="text-2xl font-extrabold text-[#2C3E50] mb-4 flex items-center gap-3">
              <span class="w-10 h-10 rounded-full bg-[#4DB6AC] flex items-center justify-center text-white text-xl">
                üìÖ
              </span>
              <span data-zh="Ë∑®Â¢É‰∏ÄÊó•ÁîüÊ¥ª" data-en="Daily Cross-Border Living">Ë∑®Â¢É‰∏ÄÊó•ÁîüÊ¥ª</span>
            </h2>
            <p class="text-xs text-[#4DB6AC] mb-4"><span data-zh="ÊªöÂä®Êü•Áúã‰∏ÄÊó•ÂÆåÊï¥‰ΩúÊÅØ ‚Üí" data-en="Scroll to view a full day ‚Üí">ÊªöÂä®Êü•Áúã‰∏ÄÊó•ÂÆåÊï¥‰ΩúÊÅØ ‚Üí</span></p>

            <!-- Timeline Container -->
            <div id="timelineContainer" class="flex gap-6 overflow-x-auto pb-4 scrollbar-hide">
              ${persona.timeline.map((item, idx) => `
                <div class="timeline-card relative shrink-0 w-[280px] h-[360px] rounded-[20px] overflow-hidden cursor-pointer shadow-[0_8px_32px_rgba(184,214,214,0.3)]">
                  <!-- Background Image -->
                  <img
                    src="${item.image}"
                    alt="${isEn ? item.titleEn : item.title}"
                    class="absolute inset-0 w-full h-full object-cover"
                  />

                  <!-- Gradient Overlay - Default -->
                  <div class="timeline-gradient-default absolute inset-0"></div>

                  <!-- Teal Overlay - Show on hover -->
                  <div class="timeline-overlay-teal absolute inset-0"></div>

                  <!-- Content -->
                  <div class="absolute bottom-0 left-0 right-0 p-6 text-white">
                    <div class="text-3xl font-bold mb-2 transition-all duration-300">${item.time}</div>
                    <div class="text-xl font-semibold mb-2 transition-all duration-300">${isEn ? item.titleEn : item.title}</div>
                    
                    <!-- Description - Show on hover -->
                    <div class="timeline-description max-h-0 opacity-0 overflow-hidden text-sm leading-relaxed transition-all duration-500 ease-in-out">${isEn ? item.descriptionEn : item.description}</div>
                  </div>
                </div>
              `).join('')}
            </div>

            <!-- Dot Navigation -->
            <div class="flex justify-center items-center gap-2 mt-6">
              ${persona.timeline.map((_, idx) => `
                <button
                  class="dot-nav transition-all duration-300 rounded-full ${
                    activeTimelineIndex === idx
                      ? 'w-8 h-2 bg-[#4DB6AC]'
                      : 'w-2 h-2 bg-[#4DB6AC] opacity-30 hover:opacity-60'
                  }"
                  data-timeline-index="${idx}"
                  aria-label="Ë∑≥ËΩ¨Âà∞Á¨¨${idx + 1}‰∏™Êó∂Èó¥ÁÇπ"
                ></button>
              `).join('')}
            </div>
          </div>
        </div>
      `;

      // Setup timeline horizontal scroll
      setupTimelineScroll();
      
      // Setup dot navigation
      setupDotNavigation();
    }

    function updateHeroImage(persona) {
      if (!persona) return;
      const newImage = new Image();
      newImage.src = persona.heroImage;
      newImage.onload = () => {
        if (heroImage) {
          heroImage.classList.remove('fade-enter-active');
          heroImage.classList.add('fade-exit-active');
          
          setTimeout(() => {
            heroImage.src = persona.heroImage;
            heroImage.classList.remove('fade-exit-active');
            heroImage.classList.add('fade-enter-active');
          }, 500);
        }
      };

      // Mobile hero
      if (mobileHeroImage) mobileHeroImage.src = persona.heroImage;
    }

    function changePersona(persona) {
      currentPersona = persona;
      activeTimelineIndex = 0;
      
      // Update hero image with fade effect
      updateHeroImage(persona);
      
      // Re-render cards and content
      renderPersonaCards();
      renderMainContent(persona);
      
      // Reset scroll position
      if (contentSection) {
        contentSection.scrollTo({ top: 0, behavior: 'smooth' });
        scrollY = 0;
      }
      
      // Reset timeline scroll
      const timelineContainer = document.getElementById('timelineContainer');
      if (timelineContainer) {
        timelineContainer.scrollTo({ left: 0, behavior: 'smooth' });
      }
    }

    // ============================================
    // SCROLL & PARALLAX EFFECTS
    // ============================================
    
    function setupScrollParallax() {
      if (!contentSection) return;
      contentSection.addEventListener('scroll', () => {
        scrollY = contentSection.scrollTop;
        
        // Apply parallax to thought bubbles
        document.querySelectorAll('.thought-bubble').forEach(bubble => {
          const speed = parseFloat(bubble.getAttribute('data-parallax-speed'));
          const yOffset = -scrollY * speed;
          bubble.style.transform = `translateY(${yOffset}px)`;
        });
      });
    }

    function setupTimelineScroll() {
      const timelineContainer = document.getElementById('timelineContainer');
      if (!timelineContainer) return;

      // Wheel event for horizontal scrolling
      timelineContainer.addEventListener('wheel', (e) => {
        e.preventDefault();
        timelineContainer.scrollLeft += e.deltaY;
      }, { passive: false });

      // Scroll event to update active dot
      timelineContainer.addEventListener('scroll', () => {
        const scrollLeft = timelineContainer.scrollLeft;
        const cardWidth = 280 + 24; // card width + gap
        const newIndex = Math.round(scrollLeft / cardWidth);
        
        if (newIndex !== activeTimelineIndex) {
          activeTimelineIndex = newIndex;
          updateDotNavigation();
        }
      });
    }

    function setupDotNavigation() {
      const dots = document.querySelectorAll('.dot-nav');
      dots.forEach(dot => {
        dot.addEventListener('click', () => {
          const index = parseInt(dot.getAttribute('data-timeline-index'));
          scrollToTimelineItem(index);
        });
      });
    }

    function scrollToTimelineItem(index) {
      const timelineContainer = document.getElementById('timelineContainer');
      if (!timelineContainer) return;

      const cardWidth = 280 + 24; // card width + gap
      const scrollLeft = index * cardWidth;
      timelineContainer.scrollTo({ left: scrollLeft, behavior: 'smooth' });
      activeTimelineIndex = index;
      updateDotNavigation();
    }

    function updateDotNavigation() {
      const dots = document.querySelectorAll('.dot-nav');
      dots.forEach((dot, idx) => {
        if (idx === activeTimelineIndex) {
          dot.className = 'dot-nav transition-all duration-300 rounded-full w-8 h-2 bg-[#4DB6AC]';
        } else {
          dot.className = 'dot-nav transition-all duration-300 rounded-full w-2 h-2 bg-[#4DB6AC] opacity-30 hover:opacity-60';
        }
      });
    }

    function applyLang(l) {
      // Update static text elements
      document.querySelectorAll('[data-zh]').forEach(el => {
        const txt = el.getAttribute(l === 'zh' ? 'data-zh' : 'data-en');
        if (txt) el.textContent = txt;
      });
      
      // Update HTML lang attribute
      document.documentElement.lang = l === 'zh' ? 'zh-CN' : 'en';
      
      // Update toggle button text
      const btn = document.getElementById('lang-toggle');
      if (btn) btn.textContent = l === 'zh' ? 'EN' : '‰∏≠Êñá';
      
      // Re-render dynamic content
      renderPersonaCards();
      renderMainContent(currentPersona);
    }

    // ============================================
    // INITIALIZATION
    // ============================================
    
    function init() {
      // Handle Navigation Active State
      const currentFile = window.location.pathname.split("/").pop();
      if (currentFile.includes("3-1") || currentFile === "") {
        const el = document.getElementById('nav-3-1'); if(el) el.classList.add('active');
      } else if (currentFile.includes("3-2")) {
        const el = document.getElementById('nav-3-2'); if(el) el.classList.add('active');
      } else if (currentFile.includes("3-3") || currentFile.includes("timeline")) {
        const el = document.getElementById('nav-timeline'); if(el) el.classList.add('active');
      } else if (currentFile.includes("4-1") || currentFile.includes("future")) {
        const el = document.getElementById('nav-future'); if(el) el.classList.add('active');
      }

      // Handle Language Toggle
      const toggle = document.getElementById('lang-toggle');
      if (toggle) {
        toggle.addEventListener('click', () => {
          lang = lang === 'zh' ? 'en' : 'zh';
          localStorage.setItem('lang', lang);
          applyLang(lang);
        });
      }

      // Initial render
      applyLang(lang);
      updateHeroImage(currentPersona);
      
      // Setup scroll effects
      setupScrollParallax();
    }

    // Start the app when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', init);
    } else {
      init();
    }
  </script>

</body>
</html>